<template >
  <div id="dashbord-home" style="margin-left: 18rem;">
    <main class="container pt-8 mx-auto lg:px-7 gap-4">
        <div class="container pc-0 pb-10 mx-auto grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <div class="box">
                <div class="group">
                  <div class="overlap">
                    <div class="overlap-group-wrapper">
                      <div class="overlap-group">
                        <div class="info">
                          Pending
                          <p class="element">
                            <span class="span">2.480,</span> 
                            <span class="text-wrapper-2">30</span>
                          </p>
                          <div class="svg-wrapper">
                            <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect x="0.13739" y="0.29007" width="34.5344" height="34.5344" rx="4" fill="#F2F4F7"/>
                              <path d="M22.1183 15.6718H12.6908L15.932 12.8435M12.6908 19.4427H22.1183L18.8771 22.271" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M26.8321 17.5572C26.8321 22.0014 26.8321 24.2234 25.4509 25.6036C24.0717 26.9847 21.8487 26.9847 17.4046 26.9847C12.9605 26.9847 10.7384 26.9847 9.35727 25.6036C7.97709 24.2244 7.97709 22.0014 7.97709 17.5572C7.97709 13.1131 7.97709 10.8911 9.35727 9.50994C10.7393 8.12976 12.9605 8.12976 17.4046 8.12976C21.8487 8.12976 24.0707 8.12976 25.4509 9.50994C26.3692 10.4282 26.6765 11.7188 26.7802 13.7862" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                          </div>
                        </div>
                        <div class="rectangle">
                          <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M14.79 14.1442C14.6939 14.1444 14.5988 14.1256 14.5101 14.0889C14.4213 14.0522 14.3407 13.9984 14.2728 13.9305C14.2049 13.8626 14.151 13.782 14.1144 13.6932C14.0777 13.6045 14.0589 13.5093 14.0591 13.4133L14.0591 8.98578L7.73893 15.3059C7.6021 15.4427 7.41651 15.5196 7.223 15.5196C7.02949 15.5196 6.84391 15.4427 6.70707 15.3059C6.57024 15.1691 6.49337 14.9835 6.49337 14.79C6.49337 14.5965 6.57024 14.4109 6.70707 14.2741L13.0272 7.95392L8.59881 7.95306C8.40497 7.95306 8.21906 7.87605 8.08199 7.73898C7.94492 7.60191 7.86791 7.416 7.86791 7.22216C7.86791 7.02831 7.94492 6.8424 8.08199 6.70533C8.21906 6.56826 8.40497 6.49126 8.59881 6.49126L14.79 6.49126C14.886 6.49109 14.9811 6.50988 15.0699 6.54656C15.1586 6.58323 15.2393 6.63706 15.3072 6.70496C15.3751 6.77287 15.4289 6.85351 15.4656 6.94226C15.5022 7.03101 15.521 7.12613 15.5209 7.22216L15.5209 13.4133C15.521 13.5093 15.5022 13.6045 15.4656 13.6932C15.4289 13.782 15.3751 13.8626 15.3072 13.9305C15.2393 13.9984 15.1586 14.0522 15.0699 14.0889C14.9811 14.1256 14.886 14.1444 14.79 14.1442Z" fill="#4CBF93"/>
                          </svg>
                          <p class="element-2">
                            <span style="color: #4CBF93;">2,15%</span> Last Month
                          </p>
                        </div>
                        <div class="text-wrapper">View More</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <div class="box">
                <div class="group">
                  <div class="overlap">
                    <div class="overlap-group-wrapper">
                      <div class="overlap-group">
                        <div class="info">
                          Paid
                          <p class="element">
                            <span class="span">84.310</span> 
                          </p>
                          <div class="svg-wrapper">
                            <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect x="0.13739" y="0.29007" width="34.5344" height="34.5344" rx="4" fill="#F2F4F7"/>
                              <path d="M22.1183 15.6718H12.6908L15.932 12.8435M12.6908 19.4427H22.1183L18.8771 22.271" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M26.8321 17.5572C26.8321 22.0014 26.8321 24.2234 25.4509 25.6036C24.0717 26.9847 21.8487 26.9847 17.4046 26.9847C12.9605 26.9847 10.7384 26.9847 9.35727 25.6036C7.97709 24.2244 7.97709 22.0014 7.97709 17.5572C7.97709 13.1131 7.97709 10.8911 9.35727 9.50994C10.7393 8.12976 12.9605 8.12976 17.4046 8.12976C21.8487 8.12976 24.0707 8.12976 25.4509 9.50994C26.3692 10.4282 26.6765 11.7188 26.7802 13.7862" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                          </div>
                        </div>
                        <div class="rectangle">
                          <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.86879 14.79C7.86862 14.6939 7.88741 14.5988 7.92408 14.5101C7.96075 14.4213 8.01459 14.3407 8.08249 14.2728C8.15039 14.2049 8.23103 14.151 8.31978 14.1144C8.40854 14.0777 8.50366 14.0589 8.59969 14.0591L13.0272 14.0591L6.70708 7.73893C6.57025 7.6021 6.49338 7.41651 6.49338 7.223C6.49338 7.02949 6.57025 6.84391 6.70708 6.70707C6.84392 6.57024 7.0295 6.49337 7.22301 6.49337C7.41653 6.49337 7.60211 6.57024 7.73894 6.70707L14.0591 13.0272L14.0599 8.59881C14.0599 8.40497 14.1369 8.21906 14.274 8.08199C14.4111 7.94492 14.597 7.86791 14.7908 7.86791C14.9847 7.86791 15.1706 7.94492 15.3077 8.08199C15.4447 8.21906 15.5217 8.40497 15.5217 8.59881L15.5217 14.79C15.5219 14.886 15.5031 14.9811 15.4664 15.0699C15.4298 15.1586 15.3759 15.2393 15.308 15.3072C15.2401 15.3751 15.1595 15.4289 15.0707 15.4656C14.982 15.5022 14.8869 15.521 14.7908 15.5209L8.59969 15.5209C8.50366 15.521 8.40854 15.5022 8.31978 15.4656C8.23103 15.4289 8.15039 15.3751 8.08249 15.3072C8.01458 15.2393 7.96075 15.1586 7.92408 15.0699C7.88741 14.9811 7.86862 14.886 7.86879 14.79Z" fill="#EE7C85"/>
                          </svg>
                          <p class="element-2">
                            <span style="color: #EE7C85;">1,10%</span> Last Month
                          </p>
                        </div>
                        <div class="text-wrapper">View More</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <div class="box">
                <div class="group">
                  <div class="overlap">
                    <div class="overlap-group-wrapper">
                      <div class="overlap-group">
                        <div class="info">
                          Rejected
                          <p class="element">
                            <span class="span">12.155</span>
                          </p>
                          <div class="svg-wrapper">
                            <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect x="0.13739" y="0.29007" width="34.5344" height="34.5344" rx="4" fill="#F2F4F7"/>
                              <path d="M22.1183 15.6718H12.6908L15.932 12.8435M12.6908 19.4427H22.1183L18.8771 22.271" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M26.8321 17.5572C26.8321 22.0014 26.8321 24.2234 25.4509 25.6036C24.0717 26.9847 21.8487 26.9847 17.4046 26.9847C12.9605 26.9847 10.7384 26.9847 9.35727 25.6036C7.97709 24.2244 7.97709 22.0014 7.97709 17.5572C7.97709 13.1131 7.97709 10.8911 9.35727 9.50994C10.7393 8.12976 12.9605 8.12976 17.4046 8.12976C21.8487 8.12976 24.0707 8.12976 25.4509 9.50994C26.3692 10.4282 26.6765 11.7188 26.7802 13.7862" stroke="#817F7F" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                          </div>
                        </div>
                        <div class="rectangle">
                          <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M14.79 14.1442C14.6939 14.1444 14.5988 14.1256 14.5101 14.0889C14.4213 14.0522 14.3407 13.9984 14.2728 13.9305C14.2049 13.8626 14.151 13.782 14.1144 13.6932C14.0777 13.6045 14.0589 13.5093 14.0591 13.4133L14.0591 8.98578L7.73893 15.3059C7.6021 15.4427 7.41651 15.5196 7.223 15.5196C7.02949 15.5196 6.84391 15.4427 6.70707 15.3059C6.57024 15.1691 6.49337 14.9835 6.49337 14.79C6.49337 14.5965 6.57024 14.4109 6.70707 14.2741L13.0272 7.95392L8.59881 7.95306C8.40497 7.95306 8.21906 7.87605 8.08199 7.73898C7.94492 7.60191 7.86791 7.416 7.86791 7.22216C7.86791 7.02831 7.94492 6.8424 8.08199 6.70533C8.21906 6.56826 8.40497 6.49126 8.59881 6.49126L14.79 6.49126C14.886 6.49109 14.9811 6.50988 15.0699 6.54656C15.1586 6.58323 15.2393 6.63706 15.3072 6.70496C15.3751 6.77287 15.4289 6.85351 15.4656 6.94226C15.5022 7.03101 15.521 7.12613 15.5209 7.22216L15.5209 13.4133C15.521 13.5093 15.5022 13.6045 15.4656 13.6932C15.4289 13.782 15.3751 13.8626 15.3072 13.9305C15.2393 13.9984 15.1586 14.0522 15.0699 14.0889C14.9811 14.1256 14.886 14.1444 14.79 14.1442Z" fill="#4CBF93"/>
                          </svg>
                          <p class="element-2">
                            <span style="color: #4CBF93;">2,15%</span> Last Month
                          </p>
                        </div>
                        <div class="text-wrapper">View More</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
        
        <div class=" mb-10 rounded-xl bg-white box-table overflow-x-auto ">
            <div class="container">
                <h1 class="text-2xl font-semibold mb-4 pt-6 pl-6 pb-2">User List</h1>
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50 upward-shadow">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">ID</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">User</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">Date Of Birth</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">Email</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">Job</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">Country</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider font-inter">Action</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr v-for="user in userList" :key="user.id"  class="upward-shadow">
                            <td class="px-6 py-4 whitespace-nowrap text-gray-500 font-inter text-xs">{{ user.id }}</td>
                            <td class="flex items-center px-6 py-4 whitespace-nowrap">
                                <img :src="user.profile_picture" alt="Profile Picture" width="24" style="border-radius: 50%; margin-right: 8px;" />
                                <span class="font-inter text-xs">{{ user.first_name }} {{ user.last_name }}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-500 font-inter text-xs">{{ formatDate(user.date_of_birth) }}</td>
                            <td class="px-6 py-4 whitespace-wrap font-inter text-xs">{{ user.email }}</td>
                            <td class="px-6 py-4 whitespace-wrap text-gray-500 font-inter text-xs">{{ user.job }}</td>
                            <td class="px-6 py-4 whitespace-wrap font-inter text-xs">{{ user.country }}</td>
                            <td class="px-6 py-4 whitespace-nowrap font-inter text-xs">
                                <button  class="bg-white shadow px-3 py-2 rounded ml-2"  @click="showOverview(user)">View Detail</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <transition name="modal-fade" appear>
        <div v-if="isModalVisible" class="fixed inset-0 z-10 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
          <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
              <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                  <!-- User detail -->
                  <div class="mt-3 text-center sm:mt-0 sm:text-left w-full flex">
                    <img :src="selectedUser.profile_picture" alt="Profile Picture" width="128" style="border-radius: 50%; margin-right: 20px; " />
                    <div class="mt-2">
                        <p class="text-lg font-bold leading-6 text-gray-900" id="modal-headline">Biodata</p>
                        <p class="text-md text-gray-500"><strong>Name</strong>             : {{ selectedUser.first_name }} {{ selectedUser.last_name }}</p>
                        <p class="text-md text-gray-500"><strong>Date birthday</strong> : {{ formatDate(selectedUser.date_of_birth) }}</p>
                        <p class="text-md text-gray-500"><strong>Email</strong>              : {{ selectedUser.email }}</p>
                        <p class="text-md text-gray-500"><strong>Phone</strong>             : {{ selectedUser.phone }}</p>
                        <p class="text-md text-gray-500"><strong>Country</strong>          : {{ selectedUser.country }}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="data-2 text-center sm:text-left mt-2">
                <p class="text-lg font-bold leading-6 text-gray-900" id="modal-headline">Address</p>
                <address>
                  {{  selectedUser.street  }}, {{  selectedUser.city }}, {{ selectedUser.country }}, {{ selectedUser.state }}, {{ selectedUser.zipcode }}, {{ selectedUser.latitude }}, {{ selectedUser.longitude }}<br />
                </address>
              </div>
              <!-- Close button -->
              <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button @click="closeModal" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </transition>
    </main>
  </div>
</template>
  
<script>
  export default {
    data() {
      return {
        userList: [],
        isModalVisible: false,
      selectedUser: null,
      };
    },
    mounted() {
      this.fetchUserList();
    },
    methods: {
      async fetchUserList() {
        try {
          const response = await fetch("https://api.slingacademy.com/v1/sample-data/users");
          const data = await response.json();
          this.userList = data.users;
          this.$emit('user-list-updated', this.userList);
        } catch (error) {
          console.error("Error fetching user list:", error);
        }
      },
      formatDate(dateString) {
        const date = new Date(dateString);
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        return `${day} / ${month} / ${year}`;
      },
      showOverview(user) {
        this.selectedUser = user;
        this.isModalVisible = true;
      },
      closeModal() {
        this.isModalVisible = false;
      },
    },
  };
</script>
  
<style scoped>
.upward-shadow {
  box-shadow: 0 -2px 2px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06);
}

.view-table{
  padding-bottom: 0px;
  padding-right: 0px;
  padding-left: 0px;
}

.box-table{
  box-shadow: 0px 0px 4px 0px #00000033;
}

.box {
  width: 347px;
  height: 143px;
}

.box .overlap {
  height: 143px;
  position: relative;
  width: 349px;
}
.box .group {
  /* position: fixed; */
  width: 349px;
  height: 143px;
  top: 0;
  left: 0;
}

.box .overlap-group {
  position: relative;
  width: 360px;
  height: 143px;
  background-color: #ffffff;
  border-radius: 10px;
  box-shadow: 0px 0px 4px #00000033;
}

.box .rectangle {
  position: absolute;
  width: 360px;
  height: 47px;
  top: 96px;
  display: flex; align-items: center;
  left: 0;
  padding-left: 25px;
  background-color: #f9fafc;
  border-radius: 0px 0px 10px 10px;
}

.box .overlap-group-wrapper{
  height: 143px;
  left: 0;
  /* position: absolute; */
  top: 0;
  width: 349px;
}

.box .text-wrapper {
  position: absolute;
  width: 62px;
  top: 112px;
  left: 272px;
  font-family: "Inter-SemiBold", Helvetica;
  font-weight: 600;
  color: #6e6e6e;
  font-size: 10px;
  letter-spacing: 0;
  line-height: normal;
}

.box .info{
  color: #727272;
  font-family: "inter-SemiBold", Helvetica;
  font-size: 12px;
  font-weight: 600;
  left: 24px;
  letter-spacing: 0;
  line-height: normal;
  padding: 2rem;
  top: 24px;
  white-space: nowrap;
  width: 48px;
}

.box .element{
  color: transparent;
  font-family: "Inter-SemiBold", Helvetica;
  font-size: 20px;
  font-weight: 600;
  left: 24px;
  letter-spacing: 0;
  line-height: normal;
  padding-top: 8px;
  width: 96px;
  color: #080808;
}

.box .element-2{
  color: transparent;
  font-family: "Inter-SemiBold", Helvetica;
  font-size: 10px;
  font-weight: 600;
  left: 24px;
  letter-spacing: 0;
  line-height: normal;
  /* padding-top: 8px; */
  padding: 17px;
  padding-left: 0;
  width: 150px;
  color: #AAAAAA;
}

.box .text-wrapper-2 {
  color: #99999999;
}

.svg-wrapper {
  padding: 20px;
  position: absolute;
  top: 0;
  right: 0;
}

.data-2{
  margin: 10px;
}

.modal-fade-enter-active, .modal-fade-leave-active {
  transition: opacity 0.5s;
}
.modal-fade-enter, .modal-fade-leave-to {
  opacity: 0;
}
</style>
  